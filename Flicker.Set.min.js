/* https://github.com/FashodaDrummer/flicker */
Flicker.Set=new Class(function(){function g(a){a=this.options.photosetURL.substitute({user:a.ownername.toLowerCase(),photoset:this.photoset});(new Element("p.photoset-url")).grab(new Element("a",{href:a,text:this.options.photosetLinkText})).fade("hide").inject($(this),this.options.photosetLinkPos).fade("in")}return{Extends:Flicker,initialize:function(a,b,d,e,c){this.photoset=d;this.apiKey=e;this.parent(a,b,c)},options:{url:"http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&photoset_id={photoset}&api_key={key}&lang={lang}&extras={extras}&user_id={id}&format=json",
extras:"date_taken,url_sq,url_m",photosetURL:"http://www.flickr.com/photos/{user}/sets/{photoset}/",photosetLinkText:"View this set on Flickr",photosetLinkPos:"after"},getPhotos:function(){$$(".photoset-url").destroy();this.parent()},formatURL:function(){this.url=this.options.url.substitute({id:this.userId,lang:this.options.lang,photoset:this.photoset,key:this.apiKey,extras:this.options.extras})},transformToHTML:function(a){var b=this.organisePhotos(a.photoset.photo),d=this.options.element,e=this.options.className,
c=new Element("div");b.each(function(a,b){var f;f=(new Element("a",{href:a.url_m})).grab(new Element("img",{src:a.url_sq,alt:a.title,width:a.width_sq,height:a.height_sq}));(new Element(d,{"class":e})).addClass("photo"+(b+1)).grab(f).inject(c)},this);this.fireEvent("imagesReady",[$$(c.getChildren())]);g.call(this,a.photoset)}}}());