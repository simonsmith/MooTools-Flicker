/* https://github.com/FashodaDrummer/flicker */
var Flicker=new Class(function(){Array.shuffle||Array.implement({shuffle:function(){for(var a,c,b=this.length;b;a=parseInt(Math.random()*b),c=this[--b],this[b]=this[a],this[a]=c);return this}});return{Implements:[Options,Events],initialize:function(a,c,b){this.setOptions(b);this.container=document.id(a);this.userId=c;this.formatURL();this.request=new Request.JSONP({callbackKey:"jsoncallback",url:this.url,onRequest:function(){this.fireEvent("request")}.bind(this),onComplete:function(a){this.fireEvent("complete",
a);this.transformToHTML(a)}.bind(this)})},options:{num:6,url:"http://api.flickr.com/services/feeds/photos_public.gne?&id={id}&lang={lang}&format=json",element:"li",lang:"en-uk",className:"flickr-photo",imgType:"_m",random:!1,onImagesReady:function(a){a.fade("hide").inject($(this));a.fade("in")}},getPhotos:function(){$(this).empty();this.request.send()},formatURL:function(){this.url=this.options.url.substitute({id:this.userId,lang:this.options.lang})}.protect(),organisePhotos:function(a){this.options.random&&
(a=a.shuffle());return Array.clone(a.splice(0,this.options.num))}.protect(),transformToHTML:function(a){var a=this.organisePhotos(a.items),c=this.options.imgType,b=this.options.element,f=this.options.className,d=new Element("div");a.each(function(a,g){var e;e=(new Element("a",{href:a.link})).grab(new Element("img",{src:a.media.m.replace("_m",c),alt:a.title}));(new Element(b,{"class":f})).addClass("photo"+(g+1)).grab(e).inject(d)},this);this.fireEvent("imagesReady",[$$(d.getChildren())])},toElement:function(){return this.container}}}());